{{ define "main" }}

<!-- prettier-ignore -->
{{ $calendars := (where .Site.RegularPages "Section" "calendar") }}
{{ $calendars = (sort $calendars "Title" "desc") }}

{{ $latest := (index $calendars 0).File.BaseFileName }}

{{ $this := "" }}
{{ if .IsSection }}
{{ $this = $latest }}
{{ else }}
{{ $this = .File.BaseFileName }}
{{ end }}

<article>
  <h1>{{.Title}}</h1>
  <iframe
    src="/assets/calendar/{{$this}}.pdf"
    style="
      margin-top: 1rem;
      width: 100%;
      height: 768px;
      box-shadow: 0 0 0.5rem;
      border-radius: 0.5rem;
    "
    frameborder="no"
  ></iframe>
</article>
<aside>
  <ul>
    <!-- prettier-ignore -->
    {{ range (sort (where .Site.RegularPages "Section" "calendar") "Title" "desc")}}
    <li>{{ partial "cura" (dict "ctx" $ "href" .Permalink "text" .Title) }}</li>
    {{ end }}
  </ul>
</aside>
{{ end }}
